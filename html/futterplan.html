<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Futterplan</title>
    <link rel="stylesheet" href="../css/futterplan.css">
</head>
<body>
<div id="Header"></div>
<table>
    <caption>
        FÃ¼tterungsplan - 02.2025
    </caption>
    <thead>
    <tr>
        <th scope="col">Gebaude</th>
        <th scope="col">Revier</th>
        <th scope="col">Futter</th>
        <th scope="col">Zeit</th>
    </tr>
    </thead>
    <tbody id="fuetterungs-list">

    </tbody>
</table>

<div id="Footer"></div>
</body>
</html>

<script type="module">
    import {getElements} from "../script/read.js";
    import {getHeader, getFooter} from "../script/read.js";

    async function loadData() {
        try {
            const gebaude = await getElements("gebaude");
            const benoetigtesfutter = await getElements("benoetigtesfutter");
            const fuetterungszeit = await getElements("fuetterungszeiten")


            const list = document.getElementById("fuetterungs-list");

            gebaude.forEach(g => {
                let listRow = document.createElement("tr");
                listRow.id = "row" + g.ID;

                let maincol = document.createElement("th");
                maincol.scope = "row";
                maincol.innerText = g.Name;

                let revierCol = document.createElement("td");
                revierCol.innerText = g.Revier.Name || "Unbekannt"; // Fallback-Wert


                let futterCol = document.createElement("td");
                benoetigtesfutter.forEach(f => {
                    if (f.Tier.Gebaude.ID === g.ID)
                    {
                        futterCol.innerHTML += f.Futter.Name + "<br>"
                    }
                })


                let zeitCol = document.createElement("td");
                fuetterungszeit.forEach(f =>{
                    if (f.Gebaude.ID === g.ID)
                    {
                        zeitCol.innerHTML += f.Zeit.Uhrzeit + "<br>"
                    }
                })

                listRow.appendChild(maincol);
                listRow.appendChild(revierCol);
                listRow.appendChild(futterCol);
                listRow.appendChild(zeitCol);

                list.appendChild(listRow);
            });
        } catch (error) {
            console.error("Fehler beim Laden der Daten:", error);
        }
    }
    getHeader();
    getFooter();
    loadData();
</script>

