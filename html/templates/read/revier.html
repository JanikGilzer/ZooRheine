<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../../css/template/read/revier.css">
    <title>{{.Name}} Territory</title>
</head>
<body>
    <header id="Header">

    </header>

    <main>
        <!-- Welcome Section with Description -->
        <div>
            <h1>Welcome to {{.Name}}</h1>
            <div class="description">
                <p>{{.Beschreibung}}</p>
            </div>
        </div>

        <!-- Gehege List -->
        <div id="gbaude_liste">
            <h2>Gehege:</h2>
            <ul></ul>
        </div>

        <!-- Image Container -->
        <div id="image-container">
            <!-- Images will be dynamically added here -->
        </div>
    </main>

    <footer id="Footer">
    </footer>

    <script type="module">
        import { getHeader, getFooter, getElements } from './../../script/read.js';

        // Fetch and render header and footer
        getHeader();
        getFooter();

        // Fetch feeding times and enclosures
        async function loadData() {
            const fuetterungszeiten = await getElements('fuetterungszeiten');
            const gebaude = await getElements('gebaude');
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');

            const gebaudeList = document.querySelector('#gbaude_liste ul');
            gebaudeList.innerHTML = ''; // Clear existing content

            for (let g in gebaude) {
                if (gebaude[g].Revier.ID == id) {
                    const gebaudeItem = document.createElement('li');
                    gebaudeItem.innerHTML = `
                        <strong>${gebaude[g].Name}</strong> -> FÃ¼tterungszeiten: 
                    `;
                    for (let f in fuetterungszeiten) {
                        console.log(fuetterungszeiten[f]);
                        if (fuetterungszeiten[f].Gebaude.ID == gebaude[g].ID) {
                            gebaudeItem.innerHTML += `${fuetterungszeiten[f].Zeit.Uhrzeit}, `;
                        }
                    }
                    gebaudeList.appendChild(gebaudeItem);
                }
            }
        }

        loadData();
    </script>
</body>
</html>